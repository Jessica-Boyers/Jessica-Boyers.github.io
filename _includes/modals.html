{% comment %}
  Modal markup for each post.
  Expects:
  - post.img : the main/top image (also used as the tile)
  - post.images : optional array of extra images. Accepts:
      - strings: "extra1.jpg"
      - or objects: { path: "extra1.jpg", alt: "Alt text", caption: "Optional caption" }
{% endcomment %}

{% for post in site.posts %}
<div class="portfolio-modal modal fade" id="portfolioModal-{{ post.modal-id }}" tabindex="-1" role="dialog" aria-labelledby="portfolioModalLabel-{{ post.modal-id }}">
  <div class="modal-content" role="document">
    <div class="close-modal" data-dismiss="modal" aria-label="Close">
      <div class="lr"><div class="rl"></div></div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
          <div class="modal-body">
            <h2 id="portfolioModalLabel-{{ post.modal-id }}">{{ post.title }}</h2>
            <hr class="star-primary">

            <!-- TOP (hero) image: same one used on the tile -->
            <img src="img/portfolio/{{ post.img }}" class="img-responsive img-centered" alt="{{ post.alt | default: post.title | escape }}">

            <!-- DESCRIPTION -->
            <p>{{ post.description }}</p>

            <!-- Item details -->
            <ul class="list-inline item-details">
              {% if post.client %}<li>Client: <strong>{{ post.client }}</strong></li>{% endif %}
              {% if post.category %}<li>Category: <strong>{{ post.category }}</strong></li>{% endif %}
              {% if post.project-date %}<li>Date: <strong>{{ post.project-date }}</strong></li>{% endif %}
            </ul>

            <!-- OPTIONAL: EXTRA IMAGES GALLERY -->
            {% if post.images %}
            <div class="post-gallery" aria-label="Additional images for {{ post.title }}">
              {% for image in post.images %}
                {% assign img_path = image.path | default: image %}
                {% assign img_alt  = image.alt  | default: post.title %}
                <figure class="post-gallery-item">
                  <img src="img/portfolio/{{ img_path }}" class="img-responsive" alt="{{ img_alt | escape }}">
                  {% if image.caption %}
                    <figcaption class="post-gallery-caption">{{ image.caption }}</figcaption>
                  {% endif %}
                </figure>
              {% endfor %}
            </div>
            {% endif %}

            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endfor %}
